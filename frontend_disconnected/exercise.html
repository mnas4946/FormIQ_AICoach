<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>formIQ - Exercise Session</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="exercise-body">
    <!-- Exercise Header -->
    <header class="exercise-header">
        <div class="exercise-title-section">
            <h1 class="exercise-title">Squats</h1>
            <p class="exercise-purpose">Strengthen quadriceps and improve knee stability</p>
        </div>
        <button class="cancel-session-btn" onclick="cancelSession()">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M15 5L5 15M5 5L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Cancel Session
        </button>
    </header>

    <!-- Pre-Exercise Timeline Overlay (shown first) -->
    <div class="timeline-overlay" id="timelineOverlay">
        <div class="timeline-modal">
            <h2 class="timeline-title">Your Exercise Session</h2>
            <p class="timeline-subtitle">Complete all exercises to finish your workout</p>
            
            <div class="exercise-timeline">
                <div class="timeline-item completed">
                    <div class="timeline-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="timeline-content">
                        <h3>Squats</h3>
                        <p>10 reps Ã— 3 sets</p>
                    </div>
                </div>
                
                <div class="timeline-line"></div>
                
                <div class="timeline-item current">
                    <div class="timeline-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <div class="timeline-content">
                        <h3>Squats</h3>
                        <p>10 reps Ã— 3 sets</p>
                    </div>
                </div>
                
                <div class="timeline-line"></div>
                
                <div class="timeline-item">
                    <div class="timeline-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <div class="timeline-content">
                        <h3>Push-ups</h3>
                        <p>12 reps Ã— 2 sets</p>
                    </div>
                </div>
                
                <div class="timeline-line"></div>
                
                <div class="timeline-item">
                    <div class="timeline-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <div class="timeline-content">
                        <h3>Lunges</h3>
                        <p>8 reps Ã— 2 sets</p>
                    </div>
                </div>
                
                <div class="timeline-line"></div>
                
                <div class="timeline-item">
                    <div class="timeline-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <div class="timeline-content">
                        <h3>Planks</h3>
                        <p>30 seconds Ã— 2 sets</p>
                    </div>
                </div>
            </div>
            
            <button class="start-session-btn" onclick="startSession()">
                Start Exercise
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7 4L13 10L7 16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- Main Exercise View -->
    <main class="exercise-main" id="exerciseMain" style="display: none;">
        <!-- Camera Section (Left - 70-80%) -->
        <section class="camera-section">
            <div class="camera-view">
                <div class="camera-placeholder">
                    <svg width="120" height="120" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="60" cy="60" r="60" fill="#E5E7EB"/>
                        <path d="M60 30C43.4315 30 30 43.4315 30 60C30 76.5685 43.4315 90 60 90C76.5685 90 90 76.5685 90 60C90 43.4315 76.5685 30 60 30ZM60 75C51.7157 75 45 68.2843 45 60C45 51.7157 51.7157 45 60 45C68.2843 45 75 51.7157 75 60C75 68.2843 68.2843 75 60 75Z" fill="#9CA3AF"/>
                        <circle cx="60" cy="60" r="8" fill="#6B7280"/>
                    </svg>
                    <p class="camera-text">Camera feed will appear here</p>
                    <button class="start-camera-btn" onclick="startExercise()">Start Camera</button>
                </div>
                
                <!-- Pose Skeleton Overlay (hidden by default) -->
                <canvas id="poseCanvas" class="pose-canvas"></canvas>
                
                <!-- TTS Feedback Overlay (like subtitles on camera view) -->
                <div class="tts-bubble-overlay">
                    <div class="tts-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M11 5L6 9H2V15H6L11 19V5Z" stroke="#6366F1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M15.54 8.46C16.4774 9.39764 17.0039 10.6692 17.0039 11.995C17.0039 13.3208 16.4774 14.5924 15.54 15.53" stroke="#6366F1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M19 5.5C20.8565 7.35645 21.8964 9.8704 21.8964 12.485C21.8964 15.0996 20.8565 17.6135 19 19.47" stroke="#6366F1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <p class="tts-text" id="feedbackText">Keep your back straight and lower yourself slowly.</p>
                </div>
            </div>

            <!-- Control Buttons -->
            <div class="exercise-controls">
                <button class="control-btn pause-btn" onclick="togglePause()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 4H6V20H10V4Z" fill="currentColor"/>
                        <path d="M18 4H14V20H18V4Z" fill="currentColor"/>
                    </svg>
                    Pause
                </button>
                <button class="control-btn finish-btn" onclick="showCompletion()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Finish
                </button>
                <button class="control-btn restart-btn" onclick="restartExercise()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M1 4V10H7M23 20V14H17M20.49 9C19.84 7.34 18.63 5.94 17.05 5.02C15.47 4.1 13.62 3.72 11.79 3.94C9.96 4.16 8.25 4.97 6.93 6.24C5.61 7.51 4.75 9.17 4.49 11M3.51 15C4.16 16.66 5.37 18.06 6.95 18.98C8.53 19.9 10.38 20.28 12.21 20.06C14.04 19.84 15.75 19.03 17.07 17.76C18.39 16.49 19.25 14.83 19.51 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Restart
                </button>
            </div>
        </section>

        <!-- Tracking Panel (Right - 20-30%) -->
        <aside class="tracking-panel">
            <!-- Reps Counter -->
            <div class="reps-counter">
                <div class="reps-circle">
                    <svg class="reps-progress" width="140" height="140">
                        <circle cx="70" cy="70" r="60" stroke="#E5E7EB" stroke-width="8" fill="none"/>
                        <circle id="progressCircle" cx="70" cy="70" r="60" stroke="#6366F1" stroke-width="8" fill="none" 
                                stroke-dasharray="377" stroke-dashoffset="377" 
                                transform="rotate(-90 70 70)" stroke-linecap="round"/>
                    </svg>
                    <div class="reps-number">
                        <span class="reps-current" id="currentReps">0</span>
                        <span class="reps-total">/10</span>
                    </div>
                </div>
                <p class="reps-label">Repetitions</p>
            </div>

            <!-- Exercise Info -->
            <div class="exercise-info-card">
                <h3 class="info-title">Current Exercise</h3>
                <p class="info-exercise-name">Squats</p>
                <div class="info-divider"></div>
                <p class="info-label">Target Reps</p>
                <p class="info-value">10 reps Ã— 3 sets</p>
            </div>

            <!-- Steps Progress -->
            <div class="steps-card">
                <h3 class="steps-title">Exercise Steps</h3>
                <div class="steps-list">
                    <div class="step-item completed">
                        <div class="step-number">1</div>
                        <p class="step-text">Position feet shoulder-width apart</p>
                    </div>
                    <div class="step-item active">
                        <div class="step-number">2</div>
                        <p class="step-text">Lower body by bending knees</p>
                    </div>
                    <div class="step-item">
                        <div class="step-number">3</div>
                        <p class="step-text">Push back up to starting position</p>
                    </div>
                </div>
                
                <!-- Progress Bar -->
                <div class="progress-bar-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                    </div>
                    <p class="progress-text"><span id="progressPercent">0</span>% Complete</p>
                </div>
            </div>
        </aside>
    </main>

    <!-- Completion Overlay (hidden by default) -->
    <div class="completion-overlay" id="completionOverlay">
        <div class="completion-modal">
            <div class="completion-icon">
                <svg width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="40" cy="40" r="40" fill="#10B981"/>
                    <path d="M25 40L35 50L55 30" stroke="white" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>
            <h2 class="completion-title">Great Work, Maria! ðŸŽ‰</h2>
            <p class="completion-subtitle">You've completed your exercise session</p>
            
            <div class="completion-stats">
                <div class="completion-stat">
                    <p class="stat-number">10</p>
                    <p class="stat-label">Reps Completed</p>
                </div>
                <div class="completion-stat">
                    <p class="stat-number">85%</p>
                    <p class="stat-label">Form Accuracy</p>
                </div>
                <div class="completion-stat">
                    <p class="stat-number">5:23</p>
                    <p class="stat-label">Duration</p>
                </div>
            </div>

            <div class="completion-actions">
                <button class="btn-secondary" onclick="restartExercise()">Do Another Set</button>
                <button class="btn-primary" onclick="window.location.href='index.html'">Back to Dashboard</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>

